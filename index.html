<!DOCTYPE html>
<html>
  <head>
    <title> Take Home Test Page -- Gatehouse Media </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
     <link rel="stylesheet" type="text/css" href="styles.css">
  </head>

  <body>
  		<div class="container">

		    <div class="titlebox">
				<h1> GATEHOUSE MEDIA PRESENTS... </h1>
		    </div>

		</div>

    <script>
      // Dummy array with data.
      let dataArr = ['one','two','three','four','five','six','seven','eight'];

      // After document load, our jQuery comes online.
      $( document ).ready( ()=> {
      	  // Append data boxes to our container div.
		for ( let i = 0; i < dataArr.length; i ++) {
	      	let itemDiv = '<div class="databox" id=' + (i + 1) + '>' + dataArr[i] + '</div>';
	      	$( itemDiv ).appendTo( ".container" );
      	}

	      // Event listener for click events on our data boxes
	      // Use unique id attribute to determine if even / odd, etc.
	      $( '.databox' ).click( (element)=> {
             let boxNum = Number( element.target.id );
             // Feed our number into our determiner function.
             boxClick(boxNum);
	      })
      });

      // boxClick accepts the box id and fires the appropriate box change function.
      function boxClick(boxNum) {
         
         if ( boxNum === 3 ) {
            boxFade();
            return;
         }
         
         if ( boxNum % 2 === 0 ) {
         		console.log('It\'s even!');
         		return;
         }

         if ( boxNum % 2 === 1 ) {
         	console.log('It\'s odd!');
         	return;
         }
         
         // Error handling.
         console.log('boxNum is not an integer:  '+boxNum);
      }

      // boxFade makes databoxes fade out and in sequentially.
      function boxFade() {
      	// Cache data length to save lookups.
      	let len = dataArr.length;
      	for ( let i = 1; i <= len; i ++){
      	  let id = '#'+i;
      	  console.log('Fading out '+i);
          $( id ).delay(i * 210).fadeToggle( '100' );

      	}
      	//Fires once all changes to the databoxes are complete.
        $('.databox').promise().done( ()=> {
          for ( let j = 1; j <= len; j ++){
      	  let id = '#'+j;
      	  console.log('Fading in '+j);
          $( id ).delay(j * 210).fadeToggle( '100' );

      	  }
        })
      }
    </script>

  </body>
</html>